# Copy this file to server/.env and set your values. Do not commit .env.
#
# Telegram bot setup (one-time):
# 1. Create the bot with Telegram @BotFather: send /newbot, follow steps, copy the bot token.
# 2. Set TELEGRAM_BOT_TOKEN=... in server/.env below.
# 3. Either set TELEGRAM_WEBHOOK_URL (HTTPS) for production, or leave it unset to use polling (e.g. local dev).
# 4. Restart the server. Users can then use "Подключить" on the Telegram Bots page and will receive the same alerts as on /alerts in Telegram.

# Server
PORT=5000

# JWT
JWT_ACCESS_SECRET=your-access-secret
JWT_REFRESH_SECRET=your-refresh-secret

# Telegram Alerts Bot
# Token from @BotFather; required for Telegram connect link and alert delivery.
# If missing: connect-link returns 503; sendMessage no-ops.
TELEGRAM_BOT_TOKEN=
# Public HTTPS URL for webhook (e.g. https://your-domain.com/api/telegram/webhook). If set, Telegram POSTs updates here. If unset, backend uses getUpdates polling (works on localhost).
TELEGRAM_WEBHOOK_URL=
# Bot username for connect link (e.g. MyAlertsBot). Optional; if unset, backend calls getMe once to resolve it.
TELEGRAM_BOT_USERNAME=

# NOWPayments (PRO subscription crypto payments). Get from dashboard → API key / Public key.
# Use API key for server-side create payment; keep both out of client code.
NOWPAYMENTS_API_KEY=
NOWPAYMENTS_PUBLIC_KEY=

# Google OAuth (Sign in with Google)
# Get from https://console.cloud.google.com → APIs & Services → Credentials
GOOGLE_CLIENT_ID=

# Frontend URL used for password reset links (single URL)
FRONTEND_URL=http://localhost:5173
# Comma-separated origins allowed for API CORS + Socket.IO CORS in production
# Example: FRONTEND_URLS=https://your-app.vercel.app,https://your-custom-domain.com
FRONTEND_URLS=
# Gmail: Security → 2-Step Verification → App passwords → create for Mail. Then set:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=yourname@gmail.com
# SMTP_PASS=xxxx-xxxx-xxxx-xxxx
# MAIL_FROM=yourname@gmail.com

# --- Email provider for password reset (pick ONE, first configured wins) ---
# Priority: Gmail API → SendGrid → Brevo → Mailjet → Resend → SMTP

# ★ Gmail REST API (RECOMMENDED — 100% deliverability, works on Render/Railway)
#   Uses HTTPS port 443 (not blocked), sends FROM Gmail's own servers.
#   One-time setup: node server/scripts/setup-gmail-email.js
#   Or manually:
#     1. https://console.cloud.google.com/apis/library/gmail.googleapis.com → Enable
#     2. https://console.cloud.google.com/apis/credentials → your OAuth client → copy Client Secret
#     3. Get refresh token via setup script or OAuth playground
GMAIL_CLIENT_SECRET=
GMAIL_REFRESH_TOKEN=
GMAIL_USER=defensivelox@gmail.com
# GMAIL_CLIENT_ID defaults to GOOGLE_CLIENT_ID above if not set separately

# SendGrid (free 100/day — may silently drop on free tier shared IPs):
#   Sign up at sendgrid.com → Settings → API Keys → Create API Key
#   Verify sender: Marketing → Senders, or authenticate your domain
SENDGRID_API_KEY=
# SENDGRID_FROM=CryptoAlerts <noreply@yourdomain.com>
# Brevo (free 300/day): BREVO_API_KEY=xkeysib-...
# Mailjet (free 200/day): MAILJET_API_KEY=... + MAILJET_API_SECRET=...
# Resend (needs domain verification): RESEND_API_KEY=re_...
